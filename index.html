<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ë©”ì´í”ŒìŠ¤í† ë¦¬ MVP ê³„ì‚°ê¸°</title>

<style>
* { box-sizing: border-box; }

:root{
  --bg:#f5f6f8;
  --card:#ffffff;
  --text:#111;
  --sub:#666;
  --line:#ddd;
  --primary:#2563eb;
}
body.dark{
  --bg:#0f172a;
  --card:#1e293b;
  --text:#e5e7eb;
  --sub:#94a3b8;
  --line:#334155;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui;
}
header{
  background:var(--primary);
  color:white;
  padding:14px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
main{
  max-width:1100px;
  margin:20px auto;
  padding:0 16px;
}
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}
.card{
  background:var(--card);
  border-radius:12px;
  padding:18px;
}
h3{margin:0 0 12px 0;}
label{font-size:13px;color:var(--sub);}
input{
  width:100%;
  padding:10px;
  margin-top:4px;
  margin-bottom:10px;
}
button{
  border:none;
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
}
.btn-primary{background:var(--primary);color:white;}
.btn-danger{background:#ef4444;color:white;}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th,td{
  border-bottom:1px solid var(--line);
  padding:8px;
  text-align:center;
  font-size:14px;
}

.mvp-buttons{
  display:flex;
  gap:8px;
  margin-top:10px;
  flex-wrap:wrap;
}
.mvp-buttons button{
  background:#e5e7eb;
}
.mvp-buttons button.active{
  background:var(--primary);
  color:white;
  font-weight:700;
}

.badge{
  padding:3px 8px;
  border-radius:999px;
  font-size:12px;
  color:white;
}
.bronze{background:#92400e;}
.silver{background:#64748b;}
.gold{background:#ca8a04;}
.diamond{background:#0ea5e9;}
.red{background:#ef4444;}
.black{background:#111;}

.summary-box{
  background:rgba(0,0,0,0.05);
  padding:10px;
  border-radius:8px;
  margin-top:10px;
}
body.dark .summary-box{background:rgba(255,255,255,0.08);}

.full{
  grid-column:1 / -1;
}
</style>
</head>

<body>
<header>
  <strong>MVP ê³„ì‚°ê¸°</strong>
  <button onclick="toggleMode()">ë‹¤í¬ / ë¼ì´íŠ¸</button>
</header>

<main>
<div class="grid">

<!-- ì¶©ì „ -->
<div class="card">
  <h3>ì¶©ì „ ê¸°ë¡ ì¶”ê°€</h3>
  <label>ìºì‹œ ì‚¬ìš© ë‚ ì§œ</label>
  <input type="date" id="date">
  <label>ê¸ˆì•¡</label>
  <input type="number" id="amount">
  <button class="btn-primary" onclick="addCharge()">ì¶”ê°€</button>
  <button class="btn-danger" onclick="resetAll()">ì „ì²´ ì´ˆê¸°í™”</button>

  <h3 style="margin-top:16px;">ì¶©ì „ ê¸°ë¡</h3>
  <table>
    <thead><tr><th>ë‚ ì§œ</th><th>ê¸ˆì•¡</th><th>ì†Œë©¸</th></tr></thead>
    <tbody id="list"></tbody>
  </table>

  <h3 style="margin-top:16px;">ëª©í‘œ MVP ë“±ê¸‰</h3>
  <div class="mvp-buttons">
    <button onclick="setTarget('ë¸Œë¡ ì¦ˆ')">ë¸Œë¡ ì¦ˆ</button>
    <button onclick="setTarget('ì‹¤ë²„')">ì‹¤ë²„</button>
    <button onclick="setTarget('ê³¨ë“œ')">ê³¨ë“œ</button>
    <button onclick="setTarget('ë‹¤ì´ì•„')">ë‹¤ì´ì•„</button>
    <button onclick="setTarget('ë ˆë“œ')">ë ˆë“œ</button>
    <button onclick="setTarget('ë¸”ë™')">ë¸”ë™</button>
  </div>
</div>

<!-- ìš”ì•½ -->
<div class="card">
  <h3>ğŸ“Œ ìš”ì•½ ì •ë³´</h3>
  <div id="summary"></div>
</div>

<!-- ì‹œë®¬ -->
<div class="card full">
  <h3>ğŸ“Š ì£¼ì°¨ë³„ ì˜ˆìƒ ë“±ê¸‰ ì‹œë®¬ë ˆì´ì…˜</h3>
  <table>
    <thead><tr><th>ê¸°ì¤€ ë‚ ì§œ</th><th>ì˜ˆìƒ ëˆ„ì </th><th>ë“±ê¸‰</th></tr></thead>
    <tbody id="sim"></tbody>
  </table>
</div>

</div>
</main>

<script>
const MVP={
  ë¸Œë¡ ì¦ˆ:0,
  ì‹¤ë²„:500000,
  ê³¨ë“œ:1000000,
  ë‹¤ì´ì•„:1500000,
  ë ˆë“œ:2000000,
  ë¸”ë™:3000000
};
const badgeClass={
  ë¸Œë¡ ì¦ˆ:'bronze',ì‹¤ë²„:'silver',ê³¨ë“œ:'gold',
  ë‹¤ì´ì•„:'diamond',ë ˆë“œ:'red',ë¸”ë™:'black'
};

let charges=[];
let target='ì‹¤ë²„';

function toggleMode(){
  document.body.classList.toggle('dark');
}

function addCharge(){
  const d=document.getElementById('date').value;
  const a=Number(document.getElementById('amount').value);
  if(!d||!a) return;
  const date=new Date(d);
  const expire=new Date(date);
  expire.setDate(expire.getDate()+90);
  charges.push({date,amount:a,expire});
  updateAll();
}

function resetAll(){
  charges=[];
  updateAll();
}

function setTarget(t){
  target=t;
  document.querySelectorAll('.mvp-buttons button')
    .forEach(b=>b.classList.toggle('active',b.innerText===t));
  updateAll();
}

function totalUsed(){
  return charges.reduce((s,c)=>s+c.amount,0);
}

function currentGrade(sum){
  return Object.entries(MVP).reverse().find(([k,v])=>sum>=v)[0];
}

function maintainUntil(){
  let sum=0;
  for(const c of [...charges].sort((a,b)=>a.expire-b.expire)){
    sum+=c.amount;
    if(sum>=MVP[target]) return c.expire;
  }
  return null;
}

function badge(g){
  return `<span class="badge ${badgeClass[g]}">${g}</span>`;
}

function updateAll(){
  // list
  list.innerHTML=charges.map(c=>
    `<tr><td>${c.date.toISOString().slice(0,10)}</td>
     <td>${c.amount.toLocaleString()}</td>
     <td>${c.expire.toISOString().slice(0,10)}</td></tr>`
  ).join('');

  const sum=totalUsed();
  const grade=currentGrade(sum);

  let html=`í˜„ì¬ ë“±ê¸‰: ${badge(grade)}<br>
  ìµœê·¼ 13ì£¼ ì‚¬ìš© ì´ì•¡: ${sum.toLocaleString()}ì›<br>
  <div class="summary-box">
  ğŸ¯ ëª©í‘œ ë“±ê¸‰: ${badge(target)}<br>`;

  if(sum>=MVP[target]){
    const until=maintainUntil();
    html+=`âœ… ëª©í‘œ ë‹¬ì„±<br>ğŸ“… ${until.toISOString().slice(0,10)} ê¹Œì§€ ìœ ì§€`;
  }else{
    html+=`âŒ ${(MVP[target]-sum).toLocaleString()}ì› ì¶”ê°€ í•„ìš”`;
  }
  html+='</div>';
  summary.innerHTML=html;

  // sim
  const today=new Date();
  sim.innerHTML='';
  for(let i=0;i<9;i++){
    const d=new Date(today);
    d.setDate(d.getDate()+7*i);
    sim.innerHTML+=`
    <tr><td>${d.toISOString().slice(0,10)}</td>
    <td>${sum.toLocaleString()}</td>
    <td>${currentGrade(sum)}</td></tr>`;
  }
}

updateAll();
</script>
</body>
</html>
