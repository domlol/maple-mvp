<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ë©”ì´í”ŒìŠ¤í† ë¦¬ MVP ê³„ì‚°ê¸°</title>

<style>
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: Pretendard, Arial, sans-serif;
  background: #f4f6f8;
  color: #222;
}
body.dark {
  background: #121212;
  color: #eee;
}

header {
  background: #1e6fff;
  color: #fff;
  padding: 16px 24px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.toggle-btn {
  cursor: pointer;
  font-size: 18px;
}

.container {
  max-width: 1100px;
  margin: 30px auto;
  padding: 0 16px;
}

.grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.card {
  background: #fff;
  border-radius: 14px;
  padding: 20px;
}
body.dark .card {
  background: #1f1f1f;
}

h2 {
  margin-top: 0;
}

input {
  width: 100%;
  padding: 10px;
  margin: 6px 0 12px;
  font-size: 15px;
}

button {
  padding: 10px 14px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.btn-primary { background:#1e6fff; color:#fff; }
.btn-danger { background:#e84141; color:#fff; }

.notice {
  margin-top: 10px;
  font-size: 13px;
  color: #e67e22;
}

.mvp-buttons button {
  margin: 4px;
  padding: 8px 14px;
  border-radius: 20px;
  background: #ddd;
}
.mvp-buttons button.active {
  background: linear-gradient(135deg,#ffd700,#ff9800);
  color: #000;
  font-weight: bold;
}

table {
  width: 100%;
  border-collapse: collapse;
}
th, td {
  padding: 8px;
  border-bottom: 1px solid #ccc;
  text-align: center;
}
body.dark th, body.dark td {
  border-color: #444;
}

.badge {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 13px;
  font-weight: bold;
}
.badge.ë¸Œë¡ ì¦ˆ { background:#cd7f32; color:#fff; }
.badge.ì‹¤ë²„ { background:#bfc1c2; }
.badge.ê³¨ë“œ { background:#f5c542; }
.badge.ë‹¤ì´ì•„ { background:#5fd3ff; }
.badge.ë ˆë“œ { background:#ff4d4d; color:#fff; }
.badge.ë¸”ë™ { background:#111; color:#fff; }
</style>
</head>

<body>
<header>
  <div>
    <strong>ë©”ì´í”ŒìŠ¤í† ë¦¬ MVP ê³„ì‚°ê¸°</strong><br>
    <small>ì´ë²ˆ ì£¼ í¬í•¨ ìµœê·¼ 13ì£¼ êµ¬ë§¤ ê¸ˆì•¡ ê¸°ì¤€</small>
  </div>
  <div class="toggle-btn" onclick="toggleDark()">ğŸŒ™</div>
</header>

<div class="container">
  <div class="grid">
    <div class="card">
      <h2>ì¶©ì „ ê¸°ë¡ ì¶”ê°€</h2>
      <label>ìºì‹œ ì‚¬ìš© ë‚ ì§œ</label>
      <input type="date" id="dateInput">
      <label>ê¸ˆì•¡</label>
      <input type="number" id="amountInput" placeholder="ì˜ˆ: 50000">

      <button class="btn-primary" onclick="addRecord()">ì¶”ê°€</button>
      <button class="btn-danger" onclick="resetAll()">ì „ì²´ ì´ˆê¸°í™”</button>

      <div class="notice">
        âš  MVP ê³„ì‚°ì€ ìºì‹œ ì¶©ì „ ê¸ˆì•¡ì´ ì•„ë‹Œ<br>
        <b>ìºì‹œë¥¼ ì‹¤ì œ ì‚¬ìš©í•œ ë‚ ì§œ ê¸°ì¤€</b>ì…ë‹ˆë‹¤.
      </div>

      <h3>ì¶©ì „ ê¸°ë¡</h3>
      <table id="recordTable">
        <tr><th>ë‚ ì§œ</th><th>ê¸ˆì•¡</th><th>ì†Œë©¸</th></tr>
      </table>

      <h3>ëª©í‘œ MVP ë“±ê¸‰</h3>
      <div class="mvp-buttons" id="mvpBtns"></div>
    </div>

    <div class="card">
      <h2>ğŸ“Œ ìš”ì•½ ì •ë³´</h2>
      <div id="summary"></div>
    </div>
  </div>

  <div class="card" style="margin-top:20px">
    <h2>ğŸ“Š ì£¼ì°¨ë³„ ì˜ˆìƒ ë“±ê¸‰ ì‹œë®¬ë ˆì´ì…˜</h2>
    <table id="simulation">
      <tr><th>ê¸°ì¤€ ë‚ ì§œ</th><th>ì˜ˆìƒ ëˆ„ì </th><th>ë“±ê¸‰</th></tr>
    </table>
  </div>
</div>

<script>
const mvpCriteria = {
  ë¸Œë¡ ì¦ˆ: 50000,
  ì‹¤ë²„: 300000,
  ê³¨ë“œ: 700000,
  ë‹¤ì´ì•„: 1500000,
  ë ˆë“œ: 3000000,
  ë¸”ë™: 5000000
};

let records = [];
let target = null;

function toggleDark(){
  document.body.classList.toggle("dark");
  localStorage.setItem("dark",document.body.classList.contains("dark"));
}
if(localStorage.getItem("dark")==="true") toggleDark();

function addRecord(){
  const d = dateInput.value;
  const a = +amountInput.value;
  if(!d||!a) return alert("ë‚ ì§œì™€ ê¸ˆì•¡ ì…ë ¥");

  const expire = new Date(d);
  expire.setDate(expire.getDate()+91);

  records.push({d,a,expire});
  render();
}

function resetAll(){
  records=[];
  target=null;
  render();
}

function currentSum(){
  const now = new Date();
  return records.filter(r=>r.expire>=now)
    .reduce((s,r)=>s+r.a,0);
}

function gradeBy(sum){
  let g="ì—†ìŒ";
  for(let k in mvpCriteria){
    if(sum>=mvpCriteria[k]) g=k;
  }
  return g;
}

function render(){
  // ê¸°ë¡
  recordTable.innerHTML="<tr><th>ë‚ ì§œ</th><th>ê¸ˆì•¡</th><th>ì†Œë©¸</th></tr>";
  records.forEach(r=>{
    recordTable.innerHTML+=`<tr>
      <td>${r.d}</td>
      <td>${r.a.toLocaleString()}</td>
      <td>${r.expire.toISOString().slice(0,10)}</td>
    </tr>`;
  });

  const sum=currentSum();
  const curGrade=gradeBy(sum);

  // ìš”ì•½
  let html=`í˜„ì¬ ë“±ê¸‰: <span class="badge ${curGrade}">${curGrade}</span><br>
  ìµœê·¼ 13ì£¼ ëˆ„ì : ${sum.toLocaleString()}ì›<br><br>`;

  if(target){
    if(sum>=mvpCriteria[target]){
      const minExpire=Math.min(...records.map(r=>r.expire));
      html+=`âœ… ëª©í‘œ ë‹¬ì„± (${target})<br>
      ${new Date(minExpire).toISOString().slice(0,10)}ê¹Œì§€ ìœ ì§€ ê°€ëŠ¥`;
    }else{
      html+=`âŒ ${target}ê¹Œì§€ ${(mvpCriteria[target]-sum).toLocaleString()}ì› ë¶€ì¡±`;
    }
  }

  summary.innerHTML=html;

  // ì‹œë®¬
  simulation.innerHTML="<tr><th>ê¸°ì¤€ ë‚ ì§œ</th><th>ì˜ˆìƒ ëˆ„ì </th><th>ë“±ê¸‰</th></tr>";
  for(let i=0;i<13;i++){
    const d=new Date();
    d.setDate(d.getDate()+7*i);
    simulation.innerHTML+=`<tr>
      <td>${d.toISOString().slice(0,10)}</td>
      <td>${sum.toLocaleString()}</td>
      <td>${gradeBy(sum)}</td>
    </tr>`;
  }

  // MVP ë²„íŠ¼
  mvpBtns.innerHTML="";
  Object.keys(mvpCriteria).forEach(k=>{
    const b=document.createElement("button");
    b.textContent=k;
    if(k===target) b.classList.add("active");
    b.onclick=()=>{target=k; render();}
    mvpBtns.appendChild(b);
  });
}

render();
</script>
</body>
</html>
