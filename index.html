<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ë©”ì´í”ŒìŠ¤í† ë¦¬ MVP ê³„ì‚°ê¸°</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f5f6f8;
}
header {
  background: #2563eb;
  color: #fff;
  padding: 16px 24px;
  font-size: 20px;
  font-weight: bold;
}
.container {
  max-width: 1200px;
  margin: 20px auto;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}
.card {
  background: #fff;
  border-radius: 12px;
  padding: 20px;
}
.card h3 {
  margin-top: 0;
}

input {
  width: 100%;
  box-sizing: border-box;
  padding: 10px;
  margin-bottom: 10px;
}

button {
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
.btn-add { background: #2563eb; color: #fff; }
.btn-reset { background: #ef4444; color: #fff; }

.warning {
  color: #f97316;
  font-size: 13px;
  margin-top: 8px;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
th, td {
  border-bottom: 1px solid #e5e7eb;
  padding: 8px;
  text-align: center;
}
.delete-btn {
  background: #ef4444;
  color: #fff;
  border-radius: 4px;
}

.mvp-buttons {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 8px;
  margin-top: 10px;
}
.mvp-btn {
  padding: 10px 0;
  border-radius: 6px;
  background: #e5e7eb;
}
.mvp-btn.active { color: #fff; }

.bronze { background:#cd7f32; }
.silver { background:#9ca3af; }
.gold { background:#facc15; color:#000; }
.diamond { background:#22d3ee; color:#000; }
.red { background:#ef4444; }
.black { background:#000; }

.summary-item {
  margin-bottom: 14px;
}
.badge {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  color: #fff;
  font-size: 13px;
}

.full {
  grid-column: 1 / -1;
}
</style>
</head>

<body>
<header>ë©”ì´í”ŒìŠ¤í† ë¦¬ MVP ê³„ì‚°ê¸°</header>

<div class="container">
  <!-- ì™¼ìª½ -->
  <div class="card">
    <h3>ì¶©ì „ ê¸°ë¡ ì¶”ê°€</h3>
    <input type="date" id="dateInput">
    <input type="number" id="amountInput" placeholder="ê¸ˆì•¡">
    <button class="btn-add" onclick="addRecord()">ì¶”ê°€</button>
    <button class="btn-reset" onclick="resetAll()">ì „ì²´ ì´ˆê¸°í™”</button>

    <div class="warning">âš  MVP ê³„ì‚°ì€ ìºì‹œ ì¶©ì „ì¼ì´ ì•„ë‹Œ ì‹¤ì œ ìºì‹œ ì‚¬ìš© ë‚ ì§œ ê¸°ì¤€ì…ë‹ˆë‹¤.</div>

    <h3>ì¶©ì „ ê¸°ë¡</h3>
    <table>
      <thead>
        <tr><th>ë‚ ì§œ</th><th>ê¸ˆì•¡</th><th>ì‚­ì œ</th></tr>
      </thead>
      <tbody id="recordTable"></tbody>
    </table>

    <h3>ëª©í‘œ MVP ë“±ê¸‰</h3>
    <div class="mvp-buttons" id="targetButtons"></div>
  </div>

  <!-- ì˜¤ë¥¸ìª½ -->
  <div class="card">
    <h3>ğŸ“Œ ìš”ì•½ ì •ë³´</h3>
    <div id="summary"></div>
  </div>

  <!-- í•˜ë‹¨ -->
  <div class="card full">
    <h3>ğŸ“Š ì£¼ì°¨ë³„ ì˜ˆìƒ ë“±ê¸‰ ì‹œë®¬ë ˆì´ì…˜ (13ì£¼)</h3>
    <table>
      <thead>
        <tr><th>ê¸°ì¤€ ë‚ ì§œ (ëª©)</th><th>ëˆ„ì </th><th>ë“±ê¸‰</th></tr>
      </thead>
      <tbody id="weeklyTable"></tbody>
    </table>
  </div>
</div>

<script>
const MVP = [
  {name:'ë¸Œë¡ ì¦ˆ', min:150000, cls:'bronze'},
  {name:'ì‹¤ë²„', min:300000, cls:'silver'},
  {name:'ê³¨ë“œ', min:600000, cls:'gold'},
  {name:'ë‹¤ì´ì•„', min:900000, cls:'diamond'},
  {name:'ë ˆë“œ', min:1500000, cls:'red'},
  {name:'ë¸”ë™', min:3000000, cls:'black'}
];

let records = [];
let target = null;

/* ---------- ìœ í‹¸ ---------- */
function getGrade(sum){
  let g = null;
  MVP.forEach(m=>{ if(sum>=m.min) g=m; });
  return g;
}

function startOfWeekThu(d){
  const date = new Date(d);
  const day = date.getDay();
  const diff = (day<=4)?4-day:11-day;
  date.setDate(date.getDate()+diff);
  date.setHours(0,0,0,0);
  return date;
}

/* ---------- ë Œë” ---------- */
function render(){
  renderRecords();
  renderSummary();
  renderWeekly();
}

function renderRecords(){
  const tb = document.getElementById('recordTable');
  tb.innerHTML='';
  records.forEach((r,i)=>{
    tb.innerHTML+=`
      <tr>
        <td>${r.date}</td>
        <td>${r.amount.toLocaleString()}</td>
        <td><button class="delete-btn" onclick="removeRecord(${i})">X</button></td>
      </tr>`;
  });
}

function renderSummary(){
  const sum13 = records.reduce((a,b)=>a+b.amount,0);
  const grade = getGrade(sum13);
  let html = `
    <div class="summary-item">
      í˜„ì¬ ë“±ê¸‰ :
      ${grade?`<span class="badge ${grade.cls}">${grade.name}</span>`:'ì—†ìŒ'}
    </div>
    <div class="summary-item">ìµœê·¼ 13ì£¼ ëˆ„ì  : ${sum13.toLocaleString()}ì›</div>
  `;

  if(target){
    const need = target.min - sum13;
    if(need<=0){
      const end = new Date();
      end.setDate(end.getDate()+13*7-1);
      html+=`
        <div class="summary-item">
          ëª©í‘œ ë“±ê¸‰ :
          <span class="badge ${target.cls}">${target.name}</span>
        </div>
        <div class="summary-item">âœ… ëª©í‘œ ë‹¬ì„±</div>
        <div class="summary-item">ğŸ“… ${end.toISOString().slice(0,10)} ê¹Œì§€ ìœ ì§€</div>
      `;
    } else {
      html+=`
        <div class="summary-item">
          ëª©í‘œ ë“±ê¸‰ :
          <span class="badge ${target.cls}">${target.name}</span>
        </div>
        <div class="summary-item">âŒ ${need.toLocaleString()}ì› ë¶€ì¡±</div>
      `;
    }
  }
  document.getElementById('summary').innerHTML=html;
}

function renderWeekly(){
  const tb = document.getElementById('weeklyTable');
  tb.innerHTML='';
  const base = startOfWeekThu(new Date());
  for(let i=0;i<13;i++){
    const d = new Date(base);
    d.setDate(d.getDate()+i*7);
    const sum = records.reduce((a,b)=>a+b.amount,0);
    const g = getGrade(sum);
    tb.innerHTML+=`
      <tr>
        <td>${d.toISOString().slice(0,10)}</td>
        <td>${sum.toLocaleString()}</td>
        <td>${g?g.name:'ì—†ìŒ'}</td>
      </tr>`;
  }
}

/* ---------- ì´ë²¤íŠ¸ ---------- */
function addRecord(){
  const d = dateInput.value;
  const a = Number(amountInput.value);
  if(!d||!a) return;
  records.push({date:d, amount:a});
  render();
}

function removeRecord(i){
  records.splice(i,1);
  render();
}

function resetAll(){
  records=[];
  target=null;
  render();
}

/* ---------- ëª©í‘œ ë²„íŠ¼ ---------- */
const btnWrap = document.getElementById('targetButtons');
MVP.forEach(m=>{
  const b = document.createElement('button');
  b.className='mvp-btn';
  b.textContent=m.name;
  b.onclick=()=>{
    target=m;
    document.querySelectorAll('.mvp-btn').forEach(x=>x.className='mvp-btn');
    b.classList.add('active',m.cls);
    render();
  };
  btnWrap.appendChild(b);
});

render();
</script>
</body>
</html>
